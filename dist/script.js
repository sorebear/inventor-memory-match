"use strict";var matches=0,guesses=0,gamesPlayed=0,firstCardFlipped=null,secondCardFlipped=null,cardImgs={pair1:"http://res.cloudinary.com/sorebear/image/upload/c_scale,w_150/v1520717898/inventory-memory-match/pair1.png",pair2:"http://res.cloudinary.com/sorebear/image/upload/c_scale,w_150/v1520717903/inventory-memory-match/pair2.png",pair3:"http://res.cloudinary.com/sorebear/image/upload/c_scale,w_150/v1520717901/inventory-memory-match/pair3.png",pair4:"http://res.cloudinary.com/sorebear/image/upload/c_scale,w_150/v1520717906/inventory-memory-match/pair4.png",pair5:"http://res.cloudinary.com/sorebear/image/upload/c_scale,w_150/v1520717902/inventory-memory-match/pair5.png",pair6:"http://res.cloudinary.com/sorebear/image/upload/c_scale,w_150/v1520717908/inventory-memory-match/pair6.png",pair7:"http://res.cloudinary.com/sorebear/image/upload/c_scale,w_150/v1520717906/inventory-memory-match/pair7.png",pair8:"http://res.cloudinary.com/sorebear/image/upload/c_scale,w_150/v1520717915/inventory-memory-match/pair8.png",pair9:"http://res.cloudinary.com/sorebear/image/upload/c_scale,w_150/v1520717914/inventory-memory-match/pair9.png"};function randomizeCards(){for(var e=["pair1","pair1","pair2","pair2","pair3","pair3","pair4","pair4","pair5","pair5","pair6","pair6","pair7","pair7","pair8","pair8","pair9","pair9"],s=[];0<e.length;){var a=Math.floor(Math.random()*e.length);s.push(e[a]),e.splice(a,1)}for(var i=0;i<s.length;i+=1)$("#hex"+i).attr("src",cardImgs[s[i]])}function animateDisplayMessage(){setTimeout(function(){$(".message_prompt > h2").addClass("highlightAnimation")},100),setTimeout(function(){$(".message_prompt > h2").removeClass("highlightAnimation")},400)}function updateStats(){guesses+=1,$(".display_matches").html(matches),$(".display_guesses").html(guesses),0<matches&&$(".display_accuracy").html(Math.floor(matches/guesses*100)+"%"),9<=matches&&($(".no-rotate-button > img").css("display","none"),$(".message_prompt > h2").text("-YOU WIN!-"),animateDisplayMessage())}function rotateHexClockwise(e){e.css("transition","1s"),e.hasClass("deg-60")?e.addClass("deg-120").removeClass("deg-60"):e.hasClass("deg-120")?e.addClass("deg-180").removeClass("deg-120"):e.hasClass("deg-180")?e.addClass("deg-240").removeClass("deg-180"):e.hasClass("deg-240")?e.addClass("deg-300").removeClass("deg-240"):e.hasClass("deg-300")&&e.addClass("deg-360").removeClass("deg-300"),setTimeout(function(){e.css("transition","0s")},1e3)}function rotateHexCounterClockwise(e){e.css("transition","1s"),e.hasClass("deg-60")?e.addClass("deg-0").removeClass("deg-60"):e.hasClass("deg-120")?e.addClass("deg-60").removeClass("deg-120"):e.hasClass("deg-180")?e.addClass("deg-120").removeClass("deg-180"):e.hasClass("deg-240")?e.addClass("deg-180").removeClass("deg-240"):e.hasClass("deg-300")&&e.addClass("deg-240").removeClass("deg-300"),setTimeout(function(){e.css("transition","0s")},1e3)}function resetRotate(e){(e.hasClass("deg-360")||e.hasClass("deg-0"))&&e.addClass("deg-180").removeClass("deg-360").removeClass("deg-0")}function resetFlippedVariables(){secondCardFlipped=firstCardFlipped=null}function showRotators(){$(".card:not(.locked)").find(".clockwise-icon > img, .counterclockwise-icon > img").css("display","inline-block"),$(".no-rotate-button > img").css("display","block"),$(".message_prompt > h2").text("-Choose A Hex To Rotate-"),animateDisplayMessage()}function chooseRotate(){var i=!0;$(".clockwise-icon > img").click(function(e){if(i){i=!1;var s=$(e.currentTarget).parent().parent().find(".front img"),a=$(e.currentTarget).parent().parent().find(".back img");$(".clockwise-icon > img").css("display","none"),$(".counterclockwise-icon > img").css("display","none"),$(".no-rotate-button > img").css("display","none"),rotateHexClockwise(s),rotateHexClockwise(a),setTimeout(function(){resetRotate(s),resetRotate(a),resetFlippedVariables(),$(".message_prompt > h2").text("-Choose A Hex To Reveal-"),animateDisplayMessage(),i=!0},1e3)}}),$(".counterclockwise-icon > img").click(function(e){if(i){i=!1;var s=$(e.currentTarget).parent().parent().find(".front img"),a=$(e.currentTarget).parent().parent().find(".back img");$(".clockwise-icon > img").css("display","none"),$(".counterclockwise-icon > img").css("display","none"),$(".no-rotate-button > img").css("display","none"),rotateHexCounterClockwise(s),rotateHexCounterClockwise(a),setTimeout(function(){resetRotate(s),resetRotate(a),resetFlippedVariables(),$(".message_prompt > h2").text("-Choose A Hex To Reveal-"),animateDisplayMessage(),i=!0},1e3)}}),$(".no-rotate-button > img").click(function(){$(".clockwise-icon > img").css("display","none"),$(".counterclockwise-icon > img").css("display","none"),$(".no-rotate-button > img").css("display","none"),$(".message_prompt > h2").text("-Choose A Hex To Reveal-"),animateDisplayMessage(),setTimeout(resetFlippedVariables,100)})}function noMatch(){$(firstCardFlipped).find(".back img").removeClass("hidden"),$(firstCardFlipped).removeClass("locked"),$(secondCardFlipped).find(".back img").removeClass("hidden"),$(secondCardFlipped).removeClass("locked"),rotateHexClockwise($(firstCardFlipped).find(".back img")),rotateHexClockwise($(firstCardFlipped).find(".front img")),rotateHexCounterClockwise($(secondCardFlipped).find(".back img")),rotateHexCounterClockwise($(secondCardFlipped).find(".front img")),setTimeout(function(){resetRotate($(secondCardFlipped).find(".back img")),resetRotate($(secondCardFlipped).find(".front img")),resetRotate($(firstCardFlipped).find(".back img")),resetRotate($(firstCardFlipped).find(".front img")),resetFlippedVariables()},1e3)}function handleFirstFlippedHex(e){firstCardFlipped=e.currentTarget,$(".message_prompt > h2").text("-Choose A Second Hex To Reveal-"),animateDisplayMessage()}function handleSecondFlippedHex(e){$(firstCardFlipped).find(".front img").attr("src")===$(e.currentTarget).find(".front img").attr("src")?(secondCardFlipped=e.currentTarget,$(firstCardFlipped).find(".front img").hasClass("deg-180")&&$(secondCardFlipped).find(".front img").hasClass("deg-180")||$(firstCardFlipped).find(".front img").hasClass("deg-60")&&$(secondCardFlipped).find(".front img").hasClass("deg-60")||$(firstCardFlipped).find(".front img").hasClass("deg-60")&&$(secondCardFlipped).find(".front img").hasClass("deg-240")||$(firstCardFlipped).find(".front img").hasClass("deg-120")&&$(secondCardFlipped).find(".front img").hasClass("deg-120")||$(firstCardFlipped).find(".front img").hasClass("deg-120")&&$(secondCardFlipped).find(".front img").hasClass("deg-300")||$(firstCardFlipped).find(".front img").hasClass("deg-240")&&$(secondCardFlipped).find(".front img").hasClass("deg-240")||$(firstCardFlipped).find(".front img").hasClass("deg-240")&&$(secondCardFlipped).find(".front img").hasClass("deg-60")||$(firstCardFlipped).find(".front img").hasClass("deg-300")&&$(secondCardFlipped).find(".front img").hasClass("deg-300")||$(firstCardFlipped).find(".front img").hasClass("deg-300")&&$(secondCardFlipped).find(".front img").hasClass("deg-120")?(matches+=1,updateStats(),matches<9&&showRotators()):($(".message_prompt > h2").text("-The Orientations Do Not Match-"),animateDisplayMessage(),updateStats(),setTimeout(noMatch,800))):(secondCardFlipped=e.currentTarget,updateStats(),$(".message_prompt > h2").text("-The Inventors Do Not Match-"),animateDisplayMessage(),setTimeout(noMatch,800))}function flipHex(){$(".card").click(function(e){$(e.currentTarget).hasClass("locked")||null===secondCardFlipped&&($(e.currentTarget).find(".back img").css("transition","1s"),$(e.currentTarget).find(".back > img").addClass("hidden"),$(e.currentTarget).addClass("locked"),null===firstCardFlipped?handleFirstFlippedHex(e):handleSecondFlippedHex(e))})}function restartGame(e){$(".stat-bar button").click(function(){$(".card").addClass("locked"),$(".card .back img").removeClass("hidden"),$(".message_prompt > h2").text("-Choose A Hex To Reveal-"),animateDisplayMessage(e),guesses=matches=0,gamesPlayed+=1,$(".display_matches").html(matches),$(".display_guesses").html(guesses),$(".display_games_played").html(gamesPlayed),$(".display_accuracy").html("--"),$(".clockwise-icon > img").css("display","none"),$(".counterclockwise-icon > img").css("display","none"),$(".no-rotate-button > img").css("display","none"),resetFlippedVariables(),setTimeout(function(){$(".hexagon").css("transition","1s").addClass("deg-180").removeClass("deg-0 deg-60 deg-120 deg-240 deg-300 deg-360"),randomizeCards(),$(".card").removeClass("locked")},1e3)})}$(document).ready(function(){flipHex(),chooseRotate(),randomizeCards(),restartGame()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdC5qcyJdLCJuYW1lcyI6WyJtYXRjaGVzIiwiZ3Vlc3NlcyIsImdhbWVzUGxheWVkIiwiZmlyc3RDYXJkRmxpcHBlZCIsInNlY29uZENhcmRGbGlwcGVkIiwiY2FyZEltZ3MiLCJwYWlyMSIsInBhaXIyIiwicGFpcjMiLCJwYWlyNCIsInBhaXI1IiwicGFpcjYiLCJwYWlyNyIsInBhaXI4IiwicGFpcjkiLCJyYW5kb21pemVDYXJkcyIsImNhcmRzIiwicmFuZG9tQ2FyZHMiLCJsZW5ndGgiLCJpIiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwicHVzaCIsInNwbGljZSIsImoiLCIkIiwiYXR0ciIsImFuaW1hdGVEaXNwbGF5TWVzc2FnZSIsInNldFRpbWVvdXQiLCJhZGRDbGFzcyIsInJlbW92ZUNsYXNzIiwidXBkYXRlU3RhdHMiLCJodG1sIiwiY3NzIiwidGV4dCIsInJvdGF0ZUhleENsb2Nrd2lzZSIsInNlbGVjdGVkQ2FyZCIsImhhc0NsYXNzIiwicm90YXRlSGV4Q291bnRlckNsb2Nrd2lzZSIsInJlc2V0Um90YXRlIiwicmVzZXRGbGlwcGVkVmFyaWFibGVzIiwic2hvd1JvdGF0b3JzIiwiZmluZCIsImNob29zZVJvdGF0ZSIsIm5vdENsaWNrZWQiLCJjbGljayIsImUiLCJjdXJyZW50SGV4RnJvbnQiLCJjdXJyZW50VGFyZ2V0IiwicGFyZW50IiwiY3VycmVudEhleEJhY2siLCJub01hdGNoIiwiaGFuZGxlRmlyc3RGbGlwcGVkSGV4IiwiaGFuZGxlU2Vjb25kRmxpcHBlZEhleCIsImZsaXBIZXgiLCJyZXN0YXJ0R2FtZSIsImRvY3VtZW50IiwicmVhZHkiXSwibWFwcGluZ3MiOiJBQUFBLGFBSUEsSUFBSUEsUUFBVSxFQUNWQyxRQUFVLEVBQ1ZDLFlBQWMsRUFDZEMsaUJBQW1CLEtBQ25CQyxrQkFBb0IsS0FFcEJDLFNBQVcsQ0FDYkMsTUFBTyw2R0FDUEMsTUFBTyw2R0FDUEMsTUFBTyw2R0FDUEMsTUFBTyw2R0FDUEMsTUFBTyw2R0FD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QixFQUFFLG9CQUFvQk8sS0FBS2pDLFNBQzNCMEIsRUFBRSxvQkFBb0JPLEtBQUtoQyxTQUMzQnlCLEVBQUUseUJBQXlCTyxLQUFLL0IsYUFDaEN3QixFQUFFLHFCQUFxQk8sS0FBSyxNQUM1QlAsRUFBRSx5QkFBeUJRLElBQUksVUFBVyxRQUMxQ1IsRUFBRSxnQ0FBZ0NRLElBQUksVUFBVyxRQUNqRFIsRUFBRSwyQkFBMkJRLElBQUksVUFBVyxRQUM1Q08sd0JBQ0FaLFdBQVcsV0FDVEgsRUFBRSxZQUFZUSxJQUFJLGFBQWMsTUFBTUosU0FBUyxXQUFXQyxZQUFZLGdEQUN0RWhCLGlCQUNBVyxFQUFFLFNBQVNLLFlBQVksV0FDdEIsT0FJUEwsRUFBRStCLFVBQVVDLE1BQU0sV0FDaEJILFVBQ0FYLGVBQ0E3QixpQkFDQXlDIiwiZmlsZSI6InNjcmlwdC5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuLy8gaW1wb3J0ICQgZnJvbSAnanF1ZXJ5JztcblxudmFyIG1hdGNoZXMgPSAwO1xudmFyIGd1ZXNzZXMgPSAwO1xudmFyIGdhbWVzUGxheWVkID0gMDtcbnZhciBmaXJzdENhcmRGbGlwcGVkID0gbnVsbDtcbnZhciBzZWNvbmRDYXJkRmxpcHBlZCA9IG51bGw7XG5cbnZhciBjYXJkSW1ncyA9IHtcbiAgcGFpcjE6ICdodHRwOi8vcmVzLmNsb3VkaW5hcnkuY29tL3NvcmViZWFyL2ltYWdlL3VwbG9hZC9jX3NjYWxlLHdfMTUwL3YxNTIwNzE3ODk4L2ludmVudG9yeS1tZW1vcnktbWF0Y2gvcGFpcjEucG5nJyxcbiAgcGFpcjI6ICdodHRwOi8vcmVzLmNsb3VkaW5hcnkuY29tL3NvcmViZWFyL2ltYWdlL3VwbG9hZC9jX3NjYWxlLHdfMTUwL3YxNTIwNzE3OTAzL2ludmVudG9yeS1tZW1vcnktbWF0Y2gvcGFpcjIucG5nJyxcbiAgcGFpcjM6ICdodHRwOi8vcmVzLmNsb3VkaW5hcnkuY29tL3NvcmViZWFyL2ltYWdlL3VwbG9hZC9jX3NjYWxlLHdfMTUwL3YxNTIwNzE3OTAxL2ludmVudG9yeS1tZW1vcnktbWF0Y2gvcGFpcjMucG5nJyxcbiAgcGFpcjQ6ICdodHRwOi8vcmVzLmNsb3VkaW5hcnkuY29tL3NvcmViZWFyL2ltYWdlL3VwbG9hZC9jX3NjYWxlLHdfMTUwL3YxNTIwNzE3OTA2L2ludmVudG9yeS1tZW1vcnktbWF0Y2gvcGFpcjQucG5nJyxcbiAgcGFpcjU6ICdodHRwOi8vcmVzLmNsb3VkaW5hcnkuY29tL3NvcmViZWFyL2ltYWdlL3VwbG9hZC9jX3NjYWxlLHdfMTUwL3YxNTIwNzE3OTAyL2ludmVudG9yeS1tZW1vcnktbWF0Y2gvcGFpcjUucG5nJyxcbiAgcGFpcjY6ICdodHRwOi8vcmVzLmNsb3VkaW5hcnkuY29tL3NvcmViZWFyL2ltYWdlL3VwbG9hZC9jX3NjYWxlLHdfMTUwL3YxNTIwNzE3OTA4L2ludmVudG9yeS1tZW1vcnktbWF0Y2gvcGFpcjYucG5nJyxcbiAgcGFpcjc6ICdodHRwOi8vcmVzLmNsb3VkaW5hcnkuY29tL3NvcmViZWFyL2ltYWdlL3VwbG9hZC9jX3NjYWxlLHdfMTUwL3YxNTIwNzE3OTA2L2ludmVudG9yeS1tZW1vcnktbWF0Y2gvcGFpcjcucG5nJyxcbiAgcGFpcjg6ICdodHRwOi8vcmVzLmNsb3VkaW5hcnkuY29tL3NvcmViZWFyL2ltYWdlL3VwbG9hZC9jX3NjYWxlLHdfMTUwL3YxNTIwNzE3OTE1L2ludmVudG9yeS1tZW1vcnktbWF0Y2gvcGFpcjgucG5nJyxcbiAgcGFpcjk6ICdodHRwOi8vcmVzLmNsb3VkaW5hcnkuY29tL3NvcmViZWFyL2ltYWdlL3VwbG9hZC9jX3NjYWxlLHdfMTUwL3YxNTIwNzE3OTE0L2ludmVudG9yeS1tZW1vcnktbWF0Y2gvcGFpcjkucG5nJ1xufTtcblxuLy8gRnVuY3Rpb24gdG8gU2h1ZmZsZSBIZXggQ2FyZHMgVXBvbiBJbml0IGFuZCBHYW1lIFJlc2V0XG5mdW5jdGlvbiByYW5kb21pemVDYXJkcygpIHtcbiAgdmFyIGNhcmRzID0gWydwYWlyMScsICdwYWlyMScsICdwYWlyMicsICdwYWlyMicsICdwYWlyMycsICdwYWlyMycsICdwYWlyNCcsICdwYWlyNCcsICdwYWlyNScsICdwYWlyNScsICdwYWlyNicsICdwYWlyNicsICdwYWlyNycsICdwYWlyNycsICdwYWlyOCcsICdwYWlyOCcsICdwYWlyOScsICdwYWlyOSddO1xuICB2YXIgcmFuZG9tQ2FyZHMgPSBbXTtcbiAgd2hpbGUgKGNhcmRzLmxlbmd0aCA+IDApIHtcbiAgICB2YXIgaSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGNhcmRzLmxlbmd0aCk7XG4gICAgcmFuZG9tQ2FyZHMucHVzaChjYXJkc1tpXSk7XG4gICAgY2FyZHMuc3BsaWNlKGksIDEpO1xuICB9XG4gIGZvciAodmFyIGogPSAwOyBqIDwgcmFuZG9tQ2FyZHMubGVuZ3RoOyBqICs9IDEpIHtcbiAgICAkKCcjaGV4JyArIGopLmF0dHIoJ3NyYycsIGNhcmRJbWdzW3JhbmRvbUNhcmRzW2pdXSk7XG4gIH1cbn1cblxuLy8gVGhpcyBmdW5jdGlvbiBhZGRzIGEgc3VidGxlIGFuaW1hdGlvbiB3aGVuZXZlciB0aGUgYm90dG9tIGRpc3BsYXkgbWVzc2FnZSBpcyBjaGFuZ2VkXG5mdW5jdGlvbiBhbmltYXRlRGlzcGxheU1lc3NhZ2UoKSB7XG4gIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICQoJy5tZXNzYWdlX3Byb21wdCA+IGgyJykuYWRkQ2xhc3MoJ2hpZ2hsaWdodEFuaW1hdGlvbicpO1xuICB9LCAxMDApO1xuXG4gIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICQoJy5tZXNzYWdlX3Byb21wdCA+IGgyJykucmVtb3ZlQ2xhc3MoJ2hpZ2hsaWdodEFuaW1hdGlvbicpO1xuICB9LCA0MDApO1xufVxuXG4vLyBUaGlzIGZ1bmN0aW9uIGZpcmVkIGFmdGVyIGV2ZXJ5IGd1ZXNzIHRvIHVwZGF0ZSBzdGF0cyBhbmQgY2hlY2sgaWYgd2luIGNvbmRpdGlvbnMgYXJlIG1ldFxuZnVuY3Rpb24gdXBkYXRlU3RhdHMoKSB7XG4gIGd1ZXNzZXMgKz0gMTtcbiAgJCgnLmRpc3BsYXlfbWF0Y2hlcycpLmh0bWwobWF0Y2hlcyk7XG4gICQoJy5kaXNwbGF5X2d1ZXNzZXMnKS5odG1sKGd1ZXNzZXMpO1xuICBpZiAobWF0Y2hlcyA+IDApIHtcbiAgICAkKCcuZGlzcGxheV9hY2N1cmFjeScpLmh0bWwoTWF0aC5mbG9vcihtYXRjaGVzIC8gZ3Vlc3NlcyAqIDEwMCkgKyAnJScpO1xuICB9XG4gIGlmIChtYXRjaGVzID49IDkpIHtcbiAgICAkKCcubm8tcm90YXRlLWJ1dHRvbiA+IGltZycpLmNzcygnZGlzcGxheScsICdub25lJyk7XG4gICAgJCgnLm1lc3NhZ2VfcHJvbXB0ID4gaDInKS50ZXh0KCctWU9VIFdJTiEtJyk7XG4gICAgYW5pbWF0ZURpc3BsYXlNZXNzYWdlKCk7XG4gIH1cbn1cblxuLy8gUmVtb3ZlIHRoZSBjdXJyZW50IHJvdGF0aW9uIGNsYXNzIGFuZCBhZGQgdGhlIG5leHQgcm90YXRpb24gY2xhc3MgbW92aW5nIGNsb2Nrd2lzZVxuZnVuY3Rpb24gcm90YXRlSGV4Q2xvY2t3aXNlKHNlbGVjdGVkQ2FyZCkge1xuICBzZWxlY3RlZENhcmQuY3NzKCd0cmFuc2l0aW9uJywgJzFzJyk7XG4gIGlmIChzZWxlY3RlZENhcmQuaGFzQ2xhc3MoJ2RlZy02MCcpKSB7XG4gICAgc2VsZWN0ZWRDYXJkLmFkZENsYXNzKCdkZWctMTIwJykucmVtb3ZlQ2xhc3MoJ2RlZy02MCcpO1xuICB9IGVsc2UgaWYgKHNlbGVjdGVkQ2FyZC5oYXNDbGFzcygnZGVnLTEyMCcpKSB7XG4gICAgc2VsZWN0ZWRDYXJkLmFkZENsYXNzKCdkZWctMTgwJykucmVtb3ZlQ2xhc3MoJ2RlZy0xMjAnKTtcbiAgfSBlbHNlIGlmIChzZWxlY3RlZENhcmQuaGFzQ2xhc3MoJ2RlZy0xODAnKSkge1xuICAgIHNlbGVjdGVkQ2FyZC5hZGRDbGFzcygnZGVnLTI0MCcpLnJlbW92ZUNsYXNzKCdkZWctMTgwJyk7XG4gIH0gZWxzZSBpZiAoc2VsZWN0ZWRDYXJkLmhhc0NsYXNzKCdkZWctMjQwJykpIHtcbiAgICBzZWxlY3RlZENhcmQuYWRkQ2xhc3MoJ2RlZy0zMDAnKS5yZW1vdmVDbGFzcygnZGVnLTI0MCcpO1xuICB9IGVsc2UgaWYgKHNlbGVjdGVkQ2FyZC5oYXNDbGFzcygnZGVnLTMwMCcpKSB7XG4gICAgc2VsZWN0ZWRDYXJkLmFkZENsYXNzKCdkZWctMzYwJykucmVtb3ZlQ2xhc3MoJ2RlZy0zMDAnKTtcbiAgfVxuICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICBzZWxlY3RlZENhcmQuY3NzKCd0cmFuc2l0aW9uJywgJzBzJyk7XG4gIH0sIDEwMDApO1xufVxuXG4vLyBSZW1vdmUgdGhlIGN1cnJlbnQgcm90YXRpb24gY2xhc3MgYW5kIGFkZCB0aGUgbmV4dCByb3RhdGlvbiBjbGFzcyBtb3ZpbmcgY291bnRlci1jbG9ja3dpc2VcbmZ1bmN0aW9uIHJvdGF0ZUhleENvdW50ZXJDbG9ja3dpc2Uoc2VsZWN0ZWRDYXJkKSB7XG4gIHNlbGVjdGVkQ2FyZC5jc3MoJ3RyYW5zaXRpb24nLCAnMXMnKTtcbiAgaWYgKHNlbGVjdGVkQ2FyZC5oYXNDbGFzcygnZGVnLTYwJykpIHtcbiAgICBzZWxlY3RlZENhcmQuYWRkQ2xhc3MoJ2RlZy0wJykucmVtb3ZlQ2xhc3MoJ2RlZy02MCcpO1xuICB9IGVsc2UgaWYgKHNlbGVjdGVkQ2FyZC5oYXNDbGFzcygnZGVnLTEyMCcpKSB7XG4gICAgc2VsZWN0ZWRDYXJkLmFkZENsYXNzKCdkZWctNjAnKS5yZW1vdmVDbGFzcygnZGVnLTEyMCcpO1xuICB9IGVsc2UgaWYgKHNlbGVjdGVkQ2FyZC5oYXNDbGFzcygnZGVnLTE4MCcpKSB7XG4gICAgc2VsZWN0ZWRDYXJkLmFkZENsYXNzKCdkZWctMTIwJykucmVtb3ZlQ2xhc3MoJ2RlZy0xODAnKTtcbiAgfSBlbHNlIGlmIChzZWxlY3RlZENhcmQuaGFzQ2xhc3MoJ2RlZy0yNDAnKSkge1xuICAgIHNlbGVjdGVkQ2FyZC5hZGRDbGFzcygnZGVnLTE4MCcpLnJlbW92ZUNsYXNzKCdkZWctMjQwJyk7XG4gIH0gZWxzZSBpZiAoc2VsZWN0ZWRDYXJkLmhhc0NsYXNzKCdkZWctMzAwJykpIHtcbiAgICBzZWxlY3RlZENhcmQuYWRkQ2xhc3MoJ2RlZy0yNDAnKS5yZW1vdmVDbGFzcygnZGVnLTMwMCcpO1xuICB9XG4gIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgIHNlbGVjdGVkQ2FyZC5jc3MoJ3RyYW5zaXRpb24nLCAnMHMnKTtcbiAgfSwgMTAwMCk7XG59XG5cbi8vIFJlc3QgdGhlIHJvdGF0aW9uIGZyb20gMzYwIG9yIDAgdG8gMTgwLiBUaGlzIGhlbHBzIG1hbmFnZSBpbmZpdGUgcm90YXRpb24gaW4gb25lIGRpcmVjdGlvblxuZnVuY3Rpb24gcmVzZXRSb3RhdGUoc2VsZWN0ZWRDYXJkKSB7XG4gIGlmIChzZWxlY3RlZENhcmQuaGFzQ2xhc3MoJ2RlZy0zNjAnKSB8fCBzZWxlY3RlZENhcmQuaGFzQ2xhc3MoJ2RlZy0wJykpIHtcbiAgICBzZWxlY3RlZENhcmQuYWRkQ2xhc3MoJ2RlZy0xODAnKS5yZW1vdmVDbGFzcygnZGVnLTM2MCcpLnJlbW92ZUNsYXNzKCdkZWctMCcpO1xuICB9XG59XG5cbi8vIFdoZW4gdGhlIHR3byBjYXJkcyBmcm9tIGEgZ3Vlc3MgZG8gbm90IG1hdGNoLCB0aGV5IHdpbGwgZmxpcCBiYWNrIG92ZXJcbmZ1bmN0aW9uIHJlc2V0RmxpcHBlZFZhcmlhYmxlcygpIHtcbiAgZmlyc3RDYXJkRmxpcHBlZCA9IG51bGw7XG4gIHNlY29uZENhcmRGbGlwcGVkID0gbnVsbDtcbn1cblxuLy8gV2hlbiBhIHVzZXIgbWFrZXMgYSBzdWNjZXNzZnVsIG1hdGNoLCB0aGV5IGhhdmUgdGhlIGNob2ljZSBvZiByb3RhdGluZyBhIHJlbWFpbmluZyBjYXJkXG4vLyBUaGlzIGZ1bmN0aW9uIGRpc3BsYXlzIHRoZSBidXR0b25zIGZvciByb3RhdGluZyBvbiBhbGwgcmVtYWluaW5nIGNhcmRzXG5mdW5jdGlvbiBzaG93Um90YXRvcnMoKSB7XG4gICQoJy5jYXJkOm5vdCgubG9ja2VkKScpLmZpbmQoJy5jbG9ja3dpc2UtaWNvbiA+IGltZywgLmNvdW50ZXJjbG9ja3dpc2UtaWNvbiA+IGltZycpLmNzcygnZGlzcGxheScsICdpbmxpbmUtYmxvY2snKTtcbiAgJCgnLm5vLXJvdGF0ZS1idXR0b24gPiBpbWcnKS5jc3MoJ2Rpc3BsYXknLCAnYmxvY2snKTtcbiAgJCgnLm1lc3NhZ2VfcHJvbXB0ID4gaDInKS50ZXh0KCctQ2hvb3NlIEEgSGV4IFRvIFJvdGF0ZS0nKTtcbiAgYW5pbWF0ZURpc3BsYXlNZXNzYWdlKCk7XG59XG5cbi8vIEhhbmRsZXMgcm90YXRpb24gb2YgdGhlIHBsYXllcidzIGNob3NlbiBoZXgsIHRoZW4gaGlkZXMgYWxsIG9mIHRoZSByb3RhdGlvbiBidXR0b25zXG5mdW5jdGlvbiBjaG9vc2VSb3RhdGUoKSB7XG4gIHZhciBub3RDbGlja2VkID0gdHJ1ZTtcbiAgJCgnLmNsb2Nrd2lzZS1pY29uID4gaW1nJykuY2xpY2soZnVuY3Rpb24gKGUpIHtcbiAgICBpZiAobm90Q2xpY2tlZCkge1xuICAgICAgbm90Q2xpY2tlZCA9IGZhbHNlO1xuICAgICAgdmFyIGN1cnJlbnRIZXhGcm9udCA9ICQoZS5jdXJyZW50VGFyZ2V0KS5wYXJlbnQoKS5wYXJlbnQoKS5maW5kKCcuZnJvbnQgaW1nJyk7XG4gICAgICB2YXIgY3VycmVudEhleEJhY2sgPSAkKGUuY3VycmVudFRhcmdldCkucGFyZW50KCkucGFyZW50KCkuZmluZCgnLmJhY2sgaW1nJyk7XG4gICAgICAkKCcuY2xvY2t3aXNlLWljb24gPiBpbWcnKS5jc3MoJ2Rpc3BsYXknLCAnbm9uZScpO1xuICAgICAgJCgnLmNvdW50ZXJjbG9ja3dpc2UtaWNvbiA+IGltZycpLmNzcygnZGlzcGxheScsICdub25lJyk7XG4gICAgICAkKCcubm8tcm90YXRlLWJ1dHRvbiA+IGltZycpLmNzcygnZGlzcGxheScsICdub25lJyk7XG4gICAgICByb3RhdGVIZXhDbG9ja3dpc2UoY3VycmVudEhleEZyb250KTtcbiAgICAgIHJvdGF0ZUhleENsb2Nrd2lzZShjdXJyZW50SGV4QmFjayk7XG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmVzZXRSb3RhdGUoY3VycmVudEhleEZyb250KTtcbiAgICAgICAgcmVzZXRSb3RhdGUoY3VycmVudEhleEJhY2spO1xuICAgICAgICByZXNldEZsaXBwZWRWYXJpYWJsZXMoKTtcbiAgICAgICAgJCgnLm1lc3NhZ2VfcHJvbXB0ID4gaDInKS50ZXh0KCctQ2hvb3NlIEEgSGV4IFRvIFJldmVhbC0nKTtcbiAgICAgICAgYW5pbWF0ZURpc3BsYXlNZXNzYWdlKCk7XG4gICAgICAgIG5vdENsaWNrZWQgPSB0cnVlO1xuICAgICAgfSwgMTAwMCk7XG4gICAgfVxuICB9KTtcbiAgJCgnLmNvdW50ZXJjbG9ja3dpc2UtaWNvbiA+IGltZycpLmNsaWNrKGZ1bmN0aW9uIChlKSB7XG4gICAgaWYgKG5vdENsaWNrZWQpIHtcbiAgICAgIG5vdENsaWNrZWQgPSBmYWxzZTtcbiAgICAgIHZhciBjdXJyZW50SGV4RnJvbnQgPSAkKGUuY3VycmVudFRhcmdldCkucGFyZW50KCkucGFyZW50KCkuZmluZCgnLmZyb250IGltZycpO1xuICAgICAgdmFyIGN1cnJlbnRIZXhCYWNrID0gJChlLmN1cnJlbnRUYXJnZXQpLnBhcmVudCgpLnBhcmVudCgpLmZpbmQoJy5iYWNrIGltZycpO1xuICAgICAgJCgnLmNsb2Nrd2lzZS1pY29uID4gaW1nJykuY3NzKCdkaXNwbGF5JywgJ25vbmUnKTtcbiAgICAgICQoJy5jb3VudGVyY2xvY2t3aXNlLWljb24gPiBpbWcnKS5jc3MoJ2Rpc3BsYXknLCAnbm9uZScpO1xuICAgICAgJCgnLm5vLXJvdGF0ZS1idXR0b24gPiBpbWcnKS5jc3MoJ2Rpc3BsYXknLCAnbm9uZScpO1xuICAgICAgcm90YXRlSGV4Q291bnRlckNsb2Nrd2lzZShjdXJyZW50SGV4RnJvbnQpO1xuICAgICAgcm90YXRlSGV4Q291bnRlckNsb2Nrd2lzZShjdXJyZW50SGV4QmFjayk7XG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmVzZXRSb3RhdGUoY3VycmVudEhleEZyb250KTtcbiAgICAgICAgcmVzZXRSb3RhdGUoY3VycmVudEhleEJhY2spO1xuICAgICAgICByZXNldEZsaXBwZWRWYXJpYWJsZXMoKTtcbiAgICAgICAgJCgnLm1lc3NhZ2VfcHJvbXB0ID4gaDInKS50ZXh0KCctQ2hvb3NlIEEgSGV4IFRvIFJldmVhbC0nKTtcbiAgICAgICAgYW5pbWF0ZURpc3BsYXlNZXNzYWdlKCk7XG4gICAgICAgIG5vdENsaWNrZWQgPSB0cnVlO1xuICAgICAgfSwgMTAwMCk7XG4gICAgfVxuICB9KTtcbiAgJCgnLm5vLXJvdGF0ZS1idXR0b24gPiBpbWcnKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgJCgnLmNsb2Nrd2lzZS1pY29uID4gaW1nJykuY3NzKCdkaXNwbGF5JywgJ25vbmUnKTtcbiAgICAkKCcuY291bnRlcmNsb2Nrd2lzZS1pY29uID4gaW1nJykuY3NzKCdkaXNwbGF5JywgJ25vbmUnKTtcbiAgICAkKCcubm8tcm90YXRlLWJ1dHRvbiA+IGltZycpLmNzcygnZGlzcGxheScsICdub25lJyk7XG4gICAgJCgnLm1lc3NhZ2VfcHJvbXB0ID4gaDInKS50ZXh0KCctQ2hvb3NlIEEgSGV4IFRvIFJldmVhbC0nKTtcbiAgICBhbmltYXRlRGlzcGxheU1lc3NhZ2UoKTtcbiAgICBzZXRUaW1lb3V0KHJlc2V0RmxpcHBlZFZhcmlhYmxlcywgMTAwKTtcbiAgfSk7XG59XG5cbi8vIFdoZW4gYSBwbGF5ZXIgZG9lcyBub3QgZ2V0IGEgbWF0Y2gsIHRoZSBjYXJkIGhleCBpcyBmbGlwcGVkIGJhY2sgYW5kIGlzIHJvdGF0ZWRcbmZ1bmN0aW9uIG5vTWF0Y2goKSB7XG4gICQoZmlyc3RDYXJkRmxpcHBlZCkuZmluZCgnLmJhY2sgaW1nJykucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xuICAkKGZpcnN0Q2FyZEZsaXBwZWQpLnJlbW92ZUNsYXNzKCdsb2NrZWQnKTtcbiAgJChzZWNvbmRDYXJkRmxpcHBlZCkuZmluZCgnLmJhY2sgaW1nJykucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xuICAkKHNlY29uZENhcmRGbGlwcGVkKS5yZW1vdmVDbGFzcygnbG9ja2VkJyk7XG4gIHJvdGF0ZUhleENsb2Nrd2lzZSgkKGZpcnN0Q2FyZEZsaXBwZWQpLmZpbmQoJy5iYWNrIGltZycpKTtcbiAgcm90YXRlSGV4Q2xvY2t3aXNlKCQoZmlyc3RDYXJkRmxpcHBlZCkuZmluZCgnLmZyb250IGltZycpKTtcbiAgcm90YXRlSGV4Q291bnRlckNsb2Nrd2lzZSgkKHNlY29uZENhcmRGbGlwcGVkKS5maW5kKCcuYmFjayBpbWcnKSk7XG4gIHJvdGF0ZUhleENvdW50ZXJDbG9ja3dpc2UoJChzZWNvbmRDYXJkRmxpcHBlZCkuZmluZCgnLmZyb250IGltZycpKTtcbiAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgcmVzZXRSb3RhdGUoJChzZWNvbmRDYXJkRmxpcHBlZCkuZmluZCgnLmJhY2sgaW1nJykpO1xuICAgIHJlc2V0Um90YXRlKCQoc2Vjb25kQ2FyZEZsaXBwZWQpLmZpbmQoJy5mcm9udCBpbWcnKSk7XG4gICAgcmVzZXRSb3RhdGUoJChmaXJzdENhcmRGbGlwcGVkKS5maW5kKCcuYmFjayBpbWcnKSk7XG4gICAgcmVzZXRSb3RhdGUoJChmaXJzdENhcmRGbGlwcGVkKS5maW5kKCcuZnJvbnQgaW1nJykpO1xuICAgIHJlc2V0RmxpcHBlZFZhcmlhYmxlcygpO1xuICB9LCAxMDAwKTtcbn1cblxuLy8gQSBmdW5jdGlvbiB0aGF0IGZpcmVzIHdoZW5ldmVyIHRoZSB1c2VyIGNsaWNrcyBvbiBhIGhleCBjYXJkXG4vLyBJZiBpdCdzIHRoZSBzZWNvbmQgY2FyZCBmbGlwcGVkIGl0IHRoZW4gZXZhbHVhdGVkIGlmIGl0IGlzIGEgbWF0Y2ggaW4gcGljdHVyZSBhbmQgb3JpZW50YXRpb25cbmZ1bmN0aW9uIGhhbmRsZUZpcnN0RmxpcHBlZEhleChlKSB7XG4gIGZpcnN0Q2FyZEZsaXBwZWQgPSBlLmN1cnJlbnRUYXJnZXQ7XG4gICQoJy5tZXNzYWdlX3Byb21wdCA+IGgyJykudGV4dCgnLUNob29zZSBBIFNlY29uZCBIZXggVG8gUmV2ZWFsLScpO1xuICBhbmltYXRlRGlzcGxheU1lc3NhZ2UoKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlU2Vjb25kRmxpcHBlZEhleChlKSB7XG4gIGlmICgkKGZpcnN0Q2FyZEZsaXBwZWQpLmZpbmQoJy5mcm9udCBpbWcnKS5hdHRyKCdzcmMnKSA9PT0gJChlLmN1cnJlbnRUYXJnZXQpLmZpbmQoJy5mcm9udCBpbWcnKS5hdHRyKCdzcmMnKSkge1xuICAgIHNlY29uZENhcmRGbGlwcGVkID0gZS5jdXJyZW50VGFyZ2V0O1xuICAgIGlmICgkKGZpcnN0Q2FyZEZsaXBwZWQpLmZpbmQoJy5mcm9udCBpbWcnKS5oYXNDbGFzcygnZGVnLTE4MCcpICYmICQoc2Vjb25kQ2FyZEZsaXBwZWQpLmZpbmQoJy5mcm9udCBpbWcnKS5oYXNDbGFzcygnZGVnLTE4MCcpIHx8ICQoZmlyc3RDYXJkRmxpcHBlZCkuZmluZCgnLmZyb250IGltZycpLmhhc0NsYXNzKCdkZWctNjAnKSAmJiAkKHNlY29uZENhcmRGbGlwcGVkKS5maW5kKCcuZnJvbnQgaW1nJykuaGFzQ2xhc3MoJ2RlZy02MCcpIHx8ICQoZmlyc3RDYXJkRmxpcHBlZCkuZmluZCgnLmZyb250IGltZycpLmhhc0NsYXNzKCdkZWctNjAnKSAmJiAkKHNlY29uZENhcmRGbGlwcGVkKS5maW5kKCcuZnJvbnQgaW1nJykuaGFzQ2xhc3MoJ2RlZy0yNDAnKSB8fCAkKGZpcnN0Q2FyZEZsaXBwZWQpLmZpbmQoJy5mcm9udCBpbWcnKS5oYXNDbGFzcygnZGVnLTEyMCcpICYmICQoc2Vjb25kQ2FyZEZsaXBwZWQpLmZpbmQoJy5mcm9udCBpbWcnKS5oYXNDbGFzcygnZGVnLTEyMCcpIHx8ICQoZmlyc3RDYXJkRmxpcHBlZCkuZmluZCgnLmZyb250IGltZycpLmhhc0NsYXNzKCdkZWctMTIwJykgJiYgJChzZWNvbmRDYXJkRmxpcHBlZCkuZmluZCgnLmZyb250IGltZycpLmhhc0NsYXNzKCdkZWctMzAwJykgfHwgJChmaXJzdENhcmRGbGlwcGVkKS5maW5kKCcuZnJvbnQgaW1nJykuaGFzQ2xhc3MoJ2RlZy0yNDAnKSAmJiAkKHNlY29uZENhcmRGbGlwcGVkKS5maW5kKCcuZnJvbnQgaW1nJykuaGFzQ2xhc3MoJ2RlZy0yNDAnKSB8fCAkKGZpcnN0Q2FyZEZsaXBwZWQpLmZpbmQoJy5mcm9udCBpbWcnKS5oYXNDbGFzcygnZGVnLTI0MCcpICYmICQoc2Vjb25kQ2FyZEZsaXBwZWQpLmZpbmQoJy5mcm9udCBpbWcnKS5oYXNDbGFzcygnZGVnLTYwJykgfHwgJChmaXJzdENhcmRGbGlwcGVkKS5maW5kKCcuZnJvbnQgaW1nJykuaGFzQ2xhc3MoJ2RlZy0zMDAnKSAmJiAkKHNlY29uZENhcmRGbGlwcGVkKS5maW5kKCcuZnJvbnQgaW1nJykuaGFzQ2xhc3MoJ2RlZy0zMDAnKSB8fCAkKGZpcnN0Q2FyZEZsaXBwZWQpLmZpbmQoJy5mcm9udCBpbWcnKS5oYXNDbGFzcygnZGVnLTMwMCcpICYmICQoc2Vjb25kQ2FyZEZsaXBwZWQpLmZpbmQoJy5mcm9udCBpbWcnKS5oYXNDbGFzcygnZGVnLTEyMCcpKSB7XG4gICAgICBtYXRjaGVzICs9IDE7XG4gICAgICB1cGRhdGVTdGF0cygpO1xuICAgICAgaWYgKG1hdGNoZXMgPCA5KSB7XG4gICAgICAgIHNob3dSb3RhdG9ycygpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAkKCcubWVzc2FnZV9wcm9tcHQgPiBoMicpLnRleHQoJy1UaGUgT3JpZW50YXRpb25zIERvIE5vdCBNYXRjaC0nKTtcbiAgICAgIGFuaW1hdGVEaXNwbGF5TWVzc2FnZSgpO1xuICAgICAgdXBkYXRlU3RhdHMoKTtcbiAgICAgIHNldFRpbWVvdXQobm9NYXRjaCwgODAwKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgc2Vjb25kQ2FyZEZsaXBwZWQgPSBlLmN1cnJlbnRUYXJnZXQ7XG4gICAgdXBkYXRlU3RhdHMoKTtcbiAgICAkKCcubWVzc2FnZV9wcm9tcHQgPiBoMicpLnRleHQoJy1UaGUgSW52ZW50b3JzIERvIE5vdCBNYXRjaC0nKTtcbiAgICBhbmltYXRlRGlzcGxheU1lc3NhZ2UoKTtcbiAgICBzZXRUaW1lb3V0KG5vTWF0Y2gsIDgwMCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gZmxpcEhleCgpIHtcbiAgJCgnLmNhcmQnKS5jbGljayhmdW5jdGlvbiAoZSkge1xuICAgIGlmICgkKGUuY3VycmVudFRhcmdldCkuaGFzQ2xhc3MoJ2xvY2tlZCcpKSB7XG4gICAgICByZXR1cm47XG4gICAgfSBlbHNlIGlmIChzZWNvbmRDYXJkRmxpcHBlZCAhPT0gbnVsbCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAkKGUuY3VycmVudFRhcmdldCkuZmluZCgnLmJhY2sgaW1nJykuY3NzKCd0cmFuc2l0aW9uJywgJzFzJyk7XG4gICAgJChlLmN1cnJlbnRUYXJnZXQpLmZpbmQoJy5iYWNrID4gaW1nJykuYWRkQ2xhc3MoJ2hpZGRlbicpO1xuICAgICQoZS5jdXJyZW50VGFyZ2V0KS5hZGRDbGFzcygnbG9ja2VkJyk7XG4gICAgaWYgKGZpcnN0Q2FyZEZsaXBwZWQgPT09IG51bGwpIHtcbiAgICAgIGhhbmRsZUZpcnN0RmxpcHBlZEhleChlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaGFuZGxlU2Vjb25kRmxpcHBlZEhleChlKTtcbiAgICB9XG4gIH0pO1xufVxuXG4vLyBGdW5jdGlvbiB0byBSZXNldCB0aGUgR2FtZVxuZnVuY3Rpb24gcmVzdGFydEdhbWUoZSkge1xuICAkKCcuc3RhdC1iYXIgYnV0dG9uJykuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICQoJy5jYXJkJykuYWRkQ2xhc3MoJ2xvY2tlZCcpO1xuICAgICQoJy5jYXJkIC5iYWNrIGltZycpLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcbiAgICAkKCcubWVzc2FnZV9wcm9tcHQgPiBoMicpLnRleHQoJy1DaG9vc2UgQSBIZXggVG8gUmV2ZWFsLScpO1xuICAgIGFuaW1hdGVEaXNwbGF5TWVzc2FnZShlKTtcbiAgICBtYXRjaGVzID0gMDtcbiAgICBndWVzc2VzID0gMDtcbiAgICBnYW1lc1BsYXllZCArPSAxO1xuICAgICQoJy5kaXNwbGF5X21hdGNoZXMnKS5odG1sKG1hdGNoZXMpO1xuICAgICQoJy5kaXNwbGF5X2d1ZXNzZXMnKS5odG1sKGd1ZXNzZXMpO1xuICAgICQoJy5kaXNwbGF5X2dhbWVzX3BsYXllZCcpLmh0bWwoZ2FtZXNQbGF5ZWQpO1xuICAgICQoJy5kaXNwbGF5X2FjY3VyYWN5JykuaHRtbCgnLS0nKTtcbiAgICAkKCcuY2xvY2t3aXNlLWljb24gPiBpbWcnKS5jc3MoJ2Rpc3BsYXknLCAnbm9uZScpO1xuICAgICQoJy5jb3VudGVyY2xvY2t3aXNlLWljb24gPiBpbWcnKS5jc3MoJ2Rpc3BsYXknLCAnbm9uZScpO1xuICAgICQoJy5uby1yb3RhdGUtYnV0dG9uID4gaW1nJykuY3NzKCdkaXNwbGF5JywgJ25vbmUnKTtcbiAgICByZXNldEZsaXBwZWRWYXJpYWJsZXMoKTtcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICQoJy5oZXhhZ29uJykuY3NzKCd0cmFuc2l0aW9uJywgJzFzJykuYWRkQ2xhc3MoJ2RlZy0xODAnKS5yZW1vdmVDbGFzcygnZGVnLTAgZGVnLTYwIGRlZy0xMjAgZGVnLTI0MCBkZWctMzAwIGRlZy0zNjAnKTtcbiAgICAgIHJhbmRvbWl6ZUNhcmRzKCk7XG4gICAgICAkKCcuY2FyZCcpLnJlbW92ZUNsYXNzKCdsb2NrZWQnKTtcbiAgICB9LCAxMDAwKTtcbiAgfSk7XG59XG5cbiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uICgpIHtcbiAgZmxpcEhleCgpO1xuICBjaG9vc2VSb3RhdGUoKTtcbiAgcmFuZG9taXplQ2FyZHMoKTtcbiAgcmVzdGFydEdhbWUoKTtcbn0pOyJdfQ==
